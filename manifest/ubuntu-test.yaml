---
apiVersion: v1
kind: Service
metadata:
  name: ubuntu-test-hs
  labels:
    app: ubuntu-test
spec:
  clusterIP: None
  selector:
    app: ubuntu-test
---
apiVersion: apps/v1beta1 
kind: StatefulSet
metadata:
  name: ubuntu-test
spec:
  serviceName: ubuntu-test-hs
  selector:
    matchLabels:
      app: ubuntu-test
  replicas: 3 
  template: 
    metadata:
      labels:
        name : "ubuntu-test"
        overscaler : "true" 
        all-metrics: "true"
        rule-1: "cpu-usage-percent_lower_10_reduce"
        current-count : "0"
        autoscaler-count : "2"
        min-replicas : "2"
        max-replicas : "5"
        app: "ubuntu-test"
    spec:
      containers:
      - name: ubuntu-test
        image: ubuntu
        ports:
        command: ["/bin/sh","-c"]
        args: ["sleep infinity"]
        resources:
            limits:
              cpu: 100m
              memory: 300Mi
